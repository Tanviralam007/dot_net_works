@model List<ZeroHunger_Food_Distribution.Models.CollectRequest>

@{
    ViewBag.Title = "My Requests";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .page-header {
        background: linear-gradient(135deg, #2d6a4f 0%, #1b4332 100%);
        color: white;
        padding: 30px;
        border-radius: 8px;
        margin-bottom: 30px;
    }

        .page-header h2 {
            margin: 0;
            font-weight: 500;
        }

    .requests-table {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .table {
        margin-bottom: 0;
    }

        .table thead {
            background-color: #2d6a4f;
            color: white;
        }

            .table thead th {
                border: none;
                font-weight: 500;
                padding: 15px;
            }

        .table tbody td {
            padding: 15px;
            vertical-align: middle;
        }

    .status-badge {
        display: inline-block;
        padding: 6px 16px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 500;
    }

    .status-pending {
        background: #fff3cd;
        color: #856404;
    }

    .status-assigned {
        background: #d1ecf1;
        color: #0c5460;
    }

    .status-collected {
        background: #cce5ff;
        color: #004085;
    }

    .status-completed {
        background: #d4edda;
        color: #155724;
    }

    .status-cancelled {
        background: #f8d7da;
        color: #721c24;
    }

    .btn-view {
        background-color: #2d6a4f;
        color: white;
        padding: 6px 16px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 13px;
    }

        .btn-view:hover {
            background-color: #1b4332;
            color: white;
            text-decoration: none;
        }

    .no-requests {
        text-align: center;
        padding: 60px 20px;
        color: #666;
    }

        .no-requests i {
            font-size: 64px;
            color: #ddd;
            margin-bottom: 20px;
        }

    .btn-create-new {
        background-color: #2d6a4f;
        color: white;
        padding: 12px 30px;
        border-radius: 8px;
        text-decoration: none;
        display: inline-block;
        margin-top: 20px;
    }

        .btn-create-new:hover {
            background-color: #1b4332;
            color: white;
            text-decoration: none;
        }
</style>

<div class="page-header">
    <h2>My Collection Requests</h2>
    <p style="margin: 5px 0 0 0; opacity: 0.9;">View and manage all your food collection requests</p>
</div>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        <span data-dismiss="alert"></span>
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        <span data-dismiss="alert"></span>
        @TempData["ErrorMessage"]
    </div>
}

@if (Model != null && Model.Count > 0)
{
    <div class="requests-table">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Request ID</th>
                    <th>Food Description</th>
                    <th>Quantity</th>
                    <th>Requested Date</th>
                    <th>Preserve Until</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var request in Model)
                {
                    <tr>
                        <td><strong>#@request.CollectRequestId</strong></td>
                        <td>@request.FoodDescription</td>
                        <td>@request.ApproximateQuantity</td>
                        <td>@request.RequestedDate.ToString("MMM dd, yyyy")</td>
                        <td>@request.PreservationTime.ToString("MMM dd, yyyy hh:mm tt")</td>
                        <td>
                            <span class="status-badge status-@request.RequestStatus.ToLower()">
                                @request.RequestStatus
                            </span>
                        </td>
                        <td>
                            @Html.ActionLink("View Details", "RequestDetails", "Restaurant", new { id = request.CollectRequestId }, new { @class = "btn btn-view btn-sm" })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div style="margin-top: 20px; text-align: right;">
        <p class="text-muted">Total: <strong>@Model.Count</strong> request(s)</p>
    </div>
}
else
{
    <div class="requests-table">
        <div class="no-requests">
            <div style="font-size: 64px; color: #ddd; margin-bottom: 20px;">📋</div>
            <h4>No Requests Yet</h4>
            <p>You haven't created any collection requests yet.</p>
            @Html.ActionLink("Create Your First Request", "CreateRequest", "Restaurant", null, new { @class = "btn-create-new" })
        </div>
    </div>
}
